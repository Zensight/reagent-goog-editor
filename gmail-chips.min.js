try {
    var iMd = function(a, b) {
        if (!b)
            return null;
        if (b.firstChild)
            return b.firstChild;
        for (; b && !b.nextSibling; )
            b = b.parentNode;
        return b ? b.nextSibling : null
    };
    z("sygr");
    var jMd = function(a) {
        this.ha = a
    };
    n(jMd, Ri);
    f = jMd.prototype;
    f.SMb = cj();
    f.pRb = cj();
    f.Usb = cj();
    f.OZb = cj();
    f.RZb = cj();
    f.vCb = aj();
    var PD = function(a) {
        ZLd.call(this);
        this.sj = a;
        this.Db = new Rf(this);
        this.tb(this.Db);
        this.wa = new Rf(this);
        this.tb(this.wa);
        this.Ba = false;
        this.ha = {};
        a = Ih(Hh.Lb());
        for (var b in kMd)
            this.ha[b] = a + "." + kMd[b];
        dj(this)
    };
    n(PD, ZLd);
    Wi(jMd, PD);
    var kMd = {
        rec: "rs",
        pec: "r",
        Cob: "tl",
        L9b: "d"
    }
      , mMd = function(a) {
        lMd(a.previousSibling, true);
        lMd(a.nextSibling)
    }
      , lMd = function(a, b) {
        a && 3 == a.nodeType && 0 != a.length && "\u200b" == a.nodeValue[b ? a.length - 1 : 0] && (1 == a.length ? Je(a) : a.nodeValue = b ? a.nodeValue.substring(0, a.length - 1) : a.nodeValue.substring(1))
    };
    PD.prototype.Hs = function() {
        return "gmail-chips"
    }
    ;
    var nMd = function(a) {
        a.Da || (a.Da = a.sj.ha.Ga());
        return a.Da
    }
      , oMd = function(a, b) {
        for (a = nMd(a); !b.nextSibling; )
            if (b = b.parentNode,
            !b || b == a)
                return b;
        for (b = b.nextSibling; 1 == b.nodeType && !Bn(b, "gmail_chip") && b.firstChild; )
            b = b.firstChild;
        return b
    }
      , QD = function(a, b) {
        for (a = nMd(a); !b.previousSibling; )
            if (b = b.parentNode,
            !b || b == a)
                return b;
        for (b = b.previousSibling; 1 == b.nodeType && !Bn(b, "gmail_chip") && b.lastChild; )
            b = b.lastChild;
        return b
    }
      , pMd = function(a, b, c, d) {
        if (3 != b.nodeType)
            if (b.childNodes && c == b.childNodes.length)
                if ((b = oMd(a, b)) && 3 == b.nodeType)
                    c = 0;
                else
                    return null;
            else if (0 == c)
                for (; b.childNodes && b.childNodes.length; )
                    b = b.childNodes[0];
            else
                return null;
        if (!b || 3 != b.nodeType)
            return null;
        if (c == b.length) {
            var e = oMd(a, b);
            if (!e)
                return null;
            if (3 == e.nodeType) {
                if (!d || 1 != e.length || "\u200b" != e.nodeValue[0])
                    return null;
                e = oMd(a, e)
            }
        } else
            d && 3 == b.nodeType && c == b.length - 1 && "\u200b" == b.nodeValue[c] && (e = oMd(a, b));
        return e && Bn(e, "gmail_chip") ? e : null
    }
      , qMd = function(a, b, c, d) {
        if (3 != b.nodeType)
            if (b.childNodes && 0 == c)
                if ((b = QD(a, b)) && 3 == b.nodeType)
                    c = b.length;
                else
                    return null;
            else if (b.childNodes && c == b.childNodes.length) {
                for (; b.childNodes && b.childNodes.length; )
                    b = b.childNodes[b.childNodes.length - 1];
                if (3 == b.nodeType)
                    c = b.length;
                else
                    return null
            } else
                return null;
        if (0 == c) {
            var e = QD(a, b);
            if (!e)
                return null;
            if (3 == e.nodeType) {
                if (!d || 1 != e.length || "\u200b" != e.nodeValue[0])
                    return null;
                e = QD(a, e)
            }
        } else
            d && 3 == b.nodeType && 1 == c && "\u200b" == b.nodeValue[0] && (e = QD(a, b));
        return e && Bn(e, "gmail_chip") ? e : null
    }
      , rMd = function(a, b) {
        for (; b && b != nMd(a); ) {
            if (Bn(b, "gmail_chip"))
                return b;
            b = b.parentNode
        }
        return null
    }
      , sMd = function(a, b) {
        var c = a.sj.ha.getRange();
        if (c) {
            var d = b ? WUa(c) : YUa(c);
            b = b ? XUa(c) : ZUa(c);
            return rMd(a, d) || pMd(a, d, b) || qMd(a, d, b)
        }
        return null
    }
      , tMd = function(a, b) {
        var c = a.parentNode;
        if (b) {
            if (a == c.firstChild) {
                do
                    a = c,
                    c = c.parentNode;
                while (!a.previousSibling)
            } else
                a = a.previousSibling;
            for (; a.lastChild; )
                a = a.lastChild;
            return new JLd(a,a.nodeValue.length - 1)
        }
        if (a == c.lastChild) {
            do
                a = c,
                c = c.parentNode;
            while (!a.nextSibling)
        } else
            a = a.nextSibling;
        for (; a.firstChild; )
            a = a.firstChild;
        return new JLd(a,1)
    }
      , uMd = function(a, b, c) {
        a = a.sj.ha.getRange();
        b = tMd(b, c);
        (c && Yb ? Gm(YUa(a), ZUa(a), b.node, b.offset) : Gm(WUa(a), XUa(a), b.node, b.offset)).select()
    };
    PD.prototype.ra = function(a, b, c) {
        if (!(c = !c)) {
            var d;
            a: {
                if (c = this.sj.ha.getRange()) {
                    var e = !b || a && Yb;
                    if (e) {
                        var g = WUa(c);
                        var k = XUa(c)
                    } else
                        g = YUa(c),
                        k = ZUa(c);
                    if (3 == g.nodeType && 1 < g.length)
                        if (0 == k) {
                            if ("\u200b" == g.nodeValue[0] && rMd(this, QD(this, g))) {
                                b ? d = e ? Gm(YUa(c), ZUa(c), g, 1) : Gm(WUa(c), XUa(c), g, 1) : d = Lm(g, 1);
                                d.select();
                                d = true;
                                break a
                            }
                        } else if (k == g.length && "\u200b" == g.nodeValue[g.length - 1] && rMd(this, oMd(this, g))) {
                            b ? d = e ? Gm(YUa(c), ZUa(c), g, g.length - 1) : Gm(WUa(c), XUa(c), g, g.length - 1) : d = Lm(g, g.length - 1);
                            d.select();
                            d = true;
                            break a
                        }
                }
                d = false
            }
            c = !d
        }
        if (c)
            if (b)
                (b = sMd(this, false)) ? uMd(this, b, a) : Yb && (b = sMd(this, true)) && uMd(this, b, true);
            else if (b = sMd(this, true))
                a = tMd(b, a),
                Lm(a.node, a.offset).select()
    }
    ;
    PD.prototype.Ma = function(a, b, c, d) {
        var e = a.length, g;
        if (1 == e) {
            if (d)
                if (g = QD(this, a))
                    if (g == nMd(this))
                        var k = 0;
                    else
                        3 == g.nodeType ? k = g.length : (k = gb(g.parentNode.childNodes, g) + 1,
                        g = g.parentNode);
                else
                    g = nMd(this),
                    k = 0;
            Je(a)
        } else
            a.nodeValue = Eba(a.nodeValue, e - 1),
            d && (g = a,
            k = e - 1);
        Je(b);
        1 == c.length ? (d || ((g = oMd(this, c)) ? g == nMd(this) ? k = g.childNodes.length - 1 : 3 == g.nodeType ? k = 0 : (k = gb(g.parentNode.childNodes, g),
        g = g.parentNode) : (g = nMd(this),
        k = g.childNodes.length)),
        Je(c)) : (c.nodeValue = Eba(c.nodeValue, 0),
        d || (g = c,
        k = 0));
        Lm(g, k).select();
        this.dispatchEvent(new r("bf",b))
    }
    ;
    var vMd = function(a, b, c) {
        for (; a && a.childNodes && 3 != a.nodeType; )
            a = a.childNodes[b],
            b = c || !a.childNodes ? 0 : a.childNodes.length;
        return a
    }
      , wMd = function(a, b, c) {
        var d = a.sj.ha.getRange();
        if (!d)
            return false;
        var e = WUa(d)
          , g = XUa(d);
        if (e != YUa(d) || g != ZUa(d))
            return false;
        d = c ? pMd(a, e, g, true) : qMd(a, e, g, true);
        if (!d)
            return false;
        var k = QD(a, d)
          , l = oMd(a, d);
        return c && (vMd(e, g, true) == k || oMd(a, e) == k) || !c && (vMd(e, g - 1, false) == l || QD(a, e) == l) ? (a.sj.ha.Oe(m(a.Ma, a, k, d, l, c)),
        b.preventDefault(),
        b.stopPropagation(),
        true) : false
    };
    PD.prototype.JBa = function(a) {
        if (!this.Ba)
            return false;
        switch (a.keyCode) {
        case 46:
            return wMd(this, a, true);
        case 8:
            return wMd(this, a, false);
        case 39:
            Yc(m(this.ra, this, false, a.shiftKey));
            break;
        case 40:
            Yc(m(this.ra, this, false, a.shiftKey, true));
            break;
        case 37:
            Yc(m(this.ra, this, true, a.shiftKey));
            break;
        case 38:
            Yc(m(this.ra, this, true, a.shiftKey, true))
        }
        return false
    }
    ;
    var xMd = function(a) {
        var b = a.sj.ha.getRange();
        if (!b)
            return false;
        var c = WUa(b)
          , d = YUa(b)
          , e = XUa(b)
          , b = ZUa(b)
          , g = Oha(c, d)
          , k = rMd(a, c);
        if (k) {
            0 > g || 0 == g && e <= b ? (c = oMd(a, k),
            e = 1) : (c = QD(a, k),
            e = c.length - 1);
            var l = true
        } else if (k = sMd(a, true)) {
            e = c == QD(a, k) ? c.length - 1 : 1;
            if (c == d && e == b)
                return b = Lm(c, e),
                b.select(),
                true;
            l = true
        }
        if (k = rMd(a, d))
            0 >= g || 0 == g && e <= b ? (d = QD(a, k),
            b = d.length - 1) : (d = oMd(a, k),
            b = 1),
            l = true;
        else if (k = sMd(a, false))
            b = d == QD(a, k) ? d.length - 1 : 1,
            l = true;
        return l ? (b = Gm(c, e, d, b),
        b.select(),
        true) : false
    };
    PD.prototype.PQ = function() {
        return xMd(this)
    }
    ;
    PD.prototype.enable = function(a) {
        PD.superClass_.enable.call(this, a);
        this.SZb()
    }
    ;
    PD.prototype.Ha = function(a) {
        var b = rMd(this, a.target);
        if (b) {
            var c = tMd(b, false);
            Lm(c.node, c.offset).select();
            this.sj.ha.Zm() && this.sj.focus()
        }
        if ("mousedown" == a.type && (Bc(a, 0) || Bc(a, 1)) && Oe(a.target))
            if (b && Bn(b, "gmail_chip_bubble"))
                bMd(this, b);
            else if (b = Ze(a.target, "A"))
                a.preventDefault(),
                $m(this.sj.Ta()).openWindow(b.href)
    }
    ;
    PD.prototype.Ia = function() {
        xMd(this)
    }
    ;
    var yMd = function(a) {
        return we("gmail_chip", a.sj.ha.Ga())
    }
      , zMd = function(a, b) {
        a.wa.listen(b, ["mousedown", "click"], a.Ha, true).
             listen(b, "mouseup", a.Ia, true).
             listen(b, ["mouseup", "mousedown"], function(a) {
              a.preventDefault();
              a.stopPropagation()
        });
        a.Ab.OZb(b)
    };
    f = PD.prototype;
    f.SZb = function() {
        this.Db.removeAll();
        this.Db.listen(this.sj, "za", this.SZb).
          listen(this.sj.RHa(), "state_change", this.TGa).
          listen(this.sj, "Ba", this.TGa).
          listen(this.sj, "Aa", this.X6a);
        this.sj.ra() && this.sj.ha && (this.Ab.RZb(),
        this.Db.listen(this.sj.ha.Ga(), "paste", this.TGa)
          .listen(this.sj.ha, "Db", this.X6a),
        this.X6a())
    }
    ;
    f.r4 = function(a) {
        return rMd(this, a)
    }
    ;
    f.$ka = function() {
        return "gmail-chips"
    }
    ;
    f.uja = function(a) {
        var b = this.Ic.Na("DIV", {
            id: this.ha.L9b
        }), c;
        if (c = (c = this.Aa.querySelector("a")) ? c.href : null) {
            var d = this.Aa, e = this.Ic.Na("SPAN"), g;
            d && (g = this.Ab.vCb(d));
            g ? OD(this, this.ha.Cob, g, m(this.REb, this, c), e) : (g = this.Ic.Na("SPAN", {}, g ? g : "Go to: "),
            b.appendChild(g),
            g = Dba(c, 48),
            OD(this, this.ha.Cob, this.Ic.createTextNode(g).data, m(this.REb, this, c), e));
            b.appendChild(e)
        }
        e = this.caa(this.ha.rec);
        c || (e.textContent = "");
        OD(this, this.ha.pec, "Remove", this.MHc, e);
        b.appendChild(e);
        a.appendChild(b)
    }
    ;
    f.MHc = function() {
        var a = this.sj.ha;
        a.QD();
        var b = this.Aa;
        Je(b);
        a.ra();
        this.dispatchEvent(new r("bf",b));
        cMd(this)
    }
    ;
    f.REb = function(a) {
        $m(this.sj.Ta()).openWindow(a);
        cMd(this)
    }
    ;
    f.X6a = function() {
        for (var a = yMd(this), b = 0, c; c = a[b]; b++)
            AMd(this, c) && "false" != c.getAttribute("contenteditable") && c.setAttribute("contenteditable", "false");
        this.Ab.pRb();
        this.TGa()
    }
    ;
    f.TGa = function() {
        this.wa.removeAll();
        this.Ab.Usb();
        var a = yMd(this);
        this.Ba = 0 < a.length;
        for (var b = 0, c; c = a[b]; b++)
            AMd(this, c) ? zMd(this, c) : this.Ab.SMb(c)
    }
    ;
    var AMd = function(a, b) {
        return !!b && Qe(a.sj.ha.Ga(), b) && !Ye(b, function(a) {
            return Bn(a, "gmail_quote")
        })
    };
    PD.prototype.Ne = function() {
        return this.sj
    }
    ;
    PD.prototype.caa = function() {
        var a = this.sj.Ta();
        return TLd(a)
    }
    ;

    y("sygr");
    A();
} catch (e) {
    _DumpException(e)
}
